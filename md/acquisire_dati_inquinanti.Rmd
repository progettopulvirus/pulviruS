---
title: "Come accedere ai dati"
description: |
  Scaricare i dati giornalieri degli inquinanti mediante R.
author:
  - name: Guido Fioravanti 
    affiliation: ISPRA
    affiliation_url: https://www.isprambiente.gov.it/it
date: "`r Sys.Date()`"
output: distill::distill_article
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,comment = "",include = TRUE,eval=FALSE)
```

I dati giornalieri degli inquinanti per il periodo 2013 - 2020 sono stati raccolti in `data frame` ^[Piuu' precisamente in un  [tibble](https://cran.r-project.org/web/packages/tibble/vignettes/tibble.html)] e archiviati come pacchetti R sul repository `github` [`progettopulvirus`](https://github.com/progettopulvirus). 

Una volta istallati i pacchetti `R` con i dati degli inquinanti, questi risiedono in modo permanente nel computer dell'utente (in altre parole: l'istallazione va fatta una volta sola, a meno che non ci sia un aggiornamento dei dati alla fonte!).

Per scaricare e istallare pacchetti R da `github` e' necessario utilizzare la funzione `install_github` disponibile nella libreria `devtools` (o in alternativa nella libreria `remotes`). 

```{r}
install.packages("devtools") #Istallare `devtools` se necessario
#install.packages("remotes") #...o remotes
```

### Esempio: istallare il pacchetto con i dati della Valle d'Aosta.

Consultando questa [tabella](pacchetti_inquinanti.html) e' possibile ricavare, per ciascuna regione, il nome del corrispondente pacchetto con i dati degli inquinanti ad oggi disponibili. 

Il pacchetto `R` con i dati della Valle d'Aosta si chiama `valleaosta` e contiene tre data frame: `pm10`, `pm25` e `no2`. 

```{r step0}
# carico devtools o in alternativa remotes
# per utilizzare install_github
library("devtools") 

#istallo il pacchetto valleaosta dal repository github progettopulvirus
install_github("progettopulvirus/valleaosta")  
```

Se al momento dell'istallazione `R` dovesse chiedere di aggiornare uno o piu' pacchetti:

```
Downloading GitHub repo progettopulvirus/valleaosta@HEAD
These packages have more recent versions available.
It is recommended to update all of them.
Which would you like to update?
```

- scegliere `All` se si ha una connessione veloce e il tempo di bere un caffe' (a seconda del numero dei pacchetti, il caffe' puo' essere anche un americano lungo)

- rispondere `None` nel caso di una connessione lenta o se si preferisce effettuare un aggiornamento manuale delle librerie di `R`.

Se l'istallazione e' andata a buon fine, abbiamo a disposizione i `data frame` con i dati della Valle d'Aosta.

```{r,echo=TRUE,include=TRUE,message=TRUE,eval=TRUE}
#carico il pacchetto valleaosta
library("valleaosta") 

#i data frame sono adesso disponibili all'utente

pm10

```

### Quali data frame sono disponibili all'interno di ciascun pacchetto?

Questa informazione e' ricavabile dalla [tabella](pacchetti_inquinanti.html) dei pacchetti oppure utilizzando il comando `data` di `R`.

```{r}
#dopo aver istallato il pacchetto valleaosta posso utilizzare
#il comando data per sapere quali e quanti data frame sono 
#disponibili
data(package="valleaosta")
```

### Quante serie di dati sono disponibili per ciascun inquinante?

```{r}
#per ogni inquinante e' stata creata una breve pagina di documentazione
library("valleaosta")
?no2
```

  
  